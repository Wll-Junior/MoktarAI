<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MoktarAI — Full Chat</title>
  <style>
    body{margin:0;font-family:sans-serif;background:#121212;color:#fff}
    .app{display:flex;height:100vh}
    .sidebar{width:240px;background:#1E1E1E;padding:16px;display:flex;flex-direction:column;gap:12px}
    .sidebar h2{margin:0;font-size:18px}
    .menu button{background:none;border:none;color:#ccc;text-align:left;padding:6px;cursor:pointer}
    .menu button:hover{color:#2D8CFF}
    .main{flex:1;display:flex;flex-direction:column}
    .topbar{padding:12px 16px;border-bottom:1px solid #333;display:flex;justify-content:space-between}
    .messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:10px}
    .bubble{max-width:70%;padding:12px;border-radius:12px}
    .user{align-self:flex-end;background:#2D8CFF;color:#fff}
    .ai{align-self:flex-start;background:#333;color:#fff}
    .footer{display:flex;padding:12px;border-top:1px solid #333}
    input{flex:1;padding:10px;border:none;border-radius:8px;background:#222;color:#fff}
    button{margin-left:8px;padding:10px;border:none;border-radius:8px;background:#2D8CFF;color:#fff;cursor:pointer}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <h2>MoktarAI</h2>
      <div class="menu">
        <button>New Chat</button>
        <button>Library</button>
        <button>Projects</button>
        <button>Your Conversations</button>
      </div>
    </aside>
    <main class="main">
      <div class="topbar">
        <strong>Chat with MoktarAI</strong>
        <div><button>🔗 Share</button></div>
      </div>
      <div class="messages" id="messages"></div>
      <div class="footer">
        <input type="text" id="userInput" placeholder="Type your message...">
        <button id="sendBtn">Send</button>
      </div>
    </main>
  </div>

  <script>
    const msgs = document.getElementById("messages");
    const input = document.getElementById("userInput");
    const sendBtn = document.getElementById("sendBtn");

    function addBubble(text, from){
      const b = document.createElement("div");
      b.className = "bubble " + (from==="user" ? "user" : "ai");
      b.textContent = text;
      msgs.appendChild(b);
      msgs.scrollTop = msgs.scrollHeight;
    }

    async function sendMessage(text){
      addBubble(text, "user");
      try {
        const res = await fetch("https://moktarai-api.onrender.com/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: text })
        });
        const data = await res.json();
        addBubble(data.reply, "ai");
      } catch (err) {
        addBubble("❌ Error contacting AI engine.", "ai");
      }
    }

    sendBtn.onclick = ()=>{
      const text = input.value.trim();
      if (!text) return;
      input.value = "";
      sendMessage(text);
    };
  </script>
</body>
</html>
